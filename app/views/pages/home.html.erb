<% if @featured_game %>

  <div class="hero-section" 
       style="background-image: url('<%= @featured_game.cover_url.gsub("t_cover_big", "t_screenshot_huge") %>');">

    <div class="hero-content">
      <h1 class="hero-title shadowed">Track games you’ve played.</h1>
      <h2 class="hero-subtitle shadowed">Save those you want to play. Tell your friends what’s good.</h2>
      
      <div class="cta-container">
        <% unless user_signed_in? %>
          <a href="<%= new_user_registration_path %>" class="hero-btn" data-turbo-frame="modal">Get Started — It’s Free!</a>
        <% end %>
      </div>

      <p class="hero-caption shadowed">
        Featured Game: 
        <%= link_to @featured_game.title, game_path(@featured_game), class: "hero-game-link" %>
      </p>
    </div>

  </div>

<% end %>

<div class="poster-section">
  <div class="section-header">
    <h4 class="section-label">Highest Rated Games</h4>
    <a href="<%= games_path %>" class="see-all-link">More</a>
  </div>

  <div class="poster-row">
    <% @top_games.each do |game| %>
      
      <%= link_to game_path(game), class: "poster-card", title: game.title do %>
        <div class="poster-image-wrapper">
          <img src="<%= game.cover_url.gsub('t_thumb', 't_cover_big') %>" 
               alt="<%= game.title %>"
               loading="lazy"> <div class="hover-overlay">
            <span class="rating-overlay-text">
              ★ <%= (game.reviews.average(:rating) || 0).to_f.round(1) %>
            </span>
          </div>

        </div>
      <% end %>

    <% end %>
  </div>
</div>

<div class="features-section">
  <h4 class="section-label">Pillarboxd lets you...</h4>
  
  <div class="features-grid">
    
    <div class="feature-card">
      <div class="icon-wrapper"><i class="fa-solid fa-eye"></i></div>
      <div class="feature-text">
        Keep track of every game you’ve ever played (or just start from the day you join).
      </div>
    </div>

    <div class="feature-card">
      <div class="icon-wrapper"><i class="fa-solid fa-heart"></i></div>
      <div class="feature-text">
        Show some love for your favorite games, lists, and reviews with a “like.”
      </div>
    </div>

    <div class="feature-card">
      <div class="icon-wrapper"><i class="fa-solid fa-align-left"></i></div>
      <div class="feature-text">
        Write and share reviews, and follow friends to read theirs.
      </div>
    </div>

    <div class="feature-card">
      <div class="icon-wrapper"><i class="fa-solid fa-star"></i></div>
      <div class="feature-text">
        Rate each game on a five-star scale to record and share your reaction.
      </div>
    </div>

    <div class="feature-card">
      <div class="icon-wrapper"><i class="fa-regular fa-calendar"></i></div>
      <div class="feature-text">
        Keep a diary of your gaming sessions (and upgrade to Pro for stats).
      </div>
    </div>

    <div class="feature-card">
      <div class="icon-wrapper"><i class="fa-solid fa-border-all"></i></div>
      <div class="feature-text">
        Compile and share lists of games on any topic and keep a backlog.
      </div>
    </div>

  </div>
</div>

<div class="poster-section">
  <div class="section-header">
    <h4 class="section-label">Newest Releases</h4>
    <a href="<%= games_path %>" class="see-all-link">More</a>
  </div>

  <div class="poster-row">
    <% @new_games.each do |game| %>
      
      <%= link_to game_path(game), class: "poster-card", title: game.title do %>
        <div class="poster-image-wrapper">
          <img src="<%= game.cover_url.gsub('t_thumb', 't_cover_big') %>" 
               alt="<%= game.title %>"
               loading="lazy">

          <div class="hover-overlay">
            <span class="release-date">
              <%= game.release_date.strftime("%b %d, %Y") %>
            </span>
          </div>
          
        </div>
      <% end %>

    <% end %>
  </div>
</div>

<div class="poster-section">
  <div class="section-header">
    <h4 class="section-label">Upcoming Releases</h4>
    <a href="<%= games_path %>" class="see-all-link">More</a>
  </div>

  <div class="poster-row">
    <% @upcoming_games.each do |game| %>
      
      <%= link_to game_path(game), class: "poster-card", title: game.title do %>
        <div class="poster-image-wrapper">
          <img src="<%= game.cover_url.gsub('t_thumb', 't_cover_big') %>" 
               alt="<%= game.title %>"
               loading="lazy">

          <div class="hover-overlay">
            <span class="release-date">
              <%= game.release_date.strftime("%b %d, %Y") %>
            </span>
          </div>
          
        </div>
      <% end %>

    <% end %>
  </div>
</div>

